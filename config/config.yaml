# Kraken Momentum Trader Configuration
# WARNING: Start with paper_trading: true and validate strategy before using real capital

trading:
  pairs: ["BTC/USD", "ETH/USD"]
  check_interval_seconds: 60
  paper_trading: true  # CRITICAL: Keep true until strategy validated over 2+ weeks

strategy:
  name: "momentum"
  momentum_threshold: 0.02  # Minimum expected gain before trading
  min_expected_gain: 0.015  # Must exceed fees (0.32-0.52% round-trip)

  # RSI Configuration
  rsi_period: 14
  rsi_oversold: 30
  rsi_overbought: 70

  # EMA Configuration
  ema_short_period: 12
  ema_long_period: 26

  # Volume Configuration
  volume_sma_period: 20
  volume_threshold: 1.5  # Volume must be 1.5x average

risk:
  # Position Limits
  max_position_size_usd: 5000
  max_position_percent: 40.0  # Max 40% of capital per initial trade
  max_total_exposure_percent: 200.0  # Max 200% total exposure (for Martingale)

  # Trailing Stop Configuration
  use_trailing_stop: true
  trailing_stop_percent: 5.0  # Exit when price drops 5% from peak
  trailing_stop_activation_percent: 5.0  # Only activate after 5% profit
  initial_stop_loss_percent: 0.0  # No initial stop loss (0 = disabled)

  # Martingale Configuration
  martingale:
    enabled: true
    max_entries: 4  # Initial + 3 add-ons
    size_multiplier: 1.25  # Each add-on is 1.25x previous
    add_on_drop_percent: 5.0  # Add when price drops 5% from avg entry
    require_rsi_oversold: true  # Must have RSI < 30 to add
    require_ema_trend: false  # Don't require EMA confirmation for adds

  # Circuit Breaker (adjusted for Martingale)
  circuit_breaker_consecutive_losses: 5  # Increased from 3
  circuit_breaker_cooldown_hours: 2  # Reduced from 4

exchange:
  name: "kraken"
  api_version: "0"
  rate_limit_calls_per_minute: 15
  retry_attempts: 3
  retry_delay_seconds: 2

persistence:
  type: "file"  # "file" for Replit, "dynamodb" for AWS
  state_file: "data/state.json"
  trades_file: "data/trades.json"
  metrics_file: "data/metrics.json"

logging:
  level: "INFO"
  format: "json"  # "json" for production, "text" for development
  include_timestamps: true
