# Scalping Strategy Configuration (v2)
# Enhanced with: Stochastic, MACD, OBV, ATR dynamic stops, short selling
# Re-optimized using 180 days of data with recency-weighted scoring
#
# Key improvements over v1:
#   - ATR-based dynamic stop-loss/take-profit (adapts to volatility)
#   - Stochastic Oscillator confirms RSI oversold/overbought
#   - MACD filters entries against momentum direction
#   - OBV divergence detection (price/volume disagreement)
#   - Short selling in bearish regimes (captures downward moves)
#   - Recency-weighted optimization (recent data counts 2x)
#
# Previous v1 results (90 days, long-only):
#   BTC/USD:  +0.68%, 60% WR, 15 trades
#   LINK/USD: +2.45%, 80% WR, 10 trades
#   AVAX/USD: +3.33%, 60% WR, 10 trades
#
# Strategy: 8-indicator confirmation with long+short support
# Entry: Buy when 2+ signals confirm oversold, Short when 3+ confirm overbought
# Exit: ATR-based dynamic TP/SL, or indicator reversal

strategy:
  name: "scalping"

  # Default parameters (fallback when per-pair not specified)
  take_profit_percent: 3.0    # Static fallback — ATR dynamic TP preferred
  stop_loss_percent: 2.0      # Static fallback — ATR dynamic SL preferred
  candle_interval: 240        # 4-hour candles
  min_confirmations: 2        # Minimum confirmations for long entry

# Core oscillators
indicators:
  rsi:
    period: 10
    oversold: 30.0
    overbought: 65.0

  stochastic:
    k_period: 14
    d_period: 3
    oversold: 20.0
    overbought: 80.0

  macd:
    fast_period: 12
    slow_period: 26
    signal_period: 9

  bollinger:
    period: 25
    std_dev: 2.0
    squeeze_threshold: 3.0

  vwap:
    threshold_percent: 0.5

  volume:
    spike_threshold: 1.75

  obv:
    sma_period: 20

  atr:
    period: 14
    stop_multiplier: 1.5      # Dynamic SL = 1.5 x ATR
    tp_multiplier: 2.0        # Dynamic TP = 2.0 x ATR
    use_dynamic_stops: true   # Use ATR-based stops instead of static %

# Short selling configuration
shorting:
  enabled: true
  min_confirmations: 3        # Shorts need more confirmation than longs

# Trading pairs — expanded with new additions
pairs:
  - BTC/USD    # Previously VIABLE: +0.68%, 60% WR
  - LINK/USD   # Previously VIABLE: +2.45%, 80% WR
  - AVAX/USD   # Previously VIABLE: +3.33%, 60% WR
  - XRP/USD    # Previously MARGINAL: +1.01%, 50% WR
  - ETH/USD    # Previously LOW DATA — needs more evaluation
  - DOT/USD    # NEW — good Kraken volume, mean-reversion friendly
  - MATIC/USD  # NEW — liquid alt, tighter spreads
  - ATOM/USD   # NEW — decent volume, often range-bound
  - NEAR/USD   # NEW — high volatility alt
  - SOL/USD    # Previously WEAK — may improve with new indicators
  - ADA/USD    # Previously WEAK — may improve with shorts
  - DOGE/USD   # Previously WEAK — may improve with shorts

# Per-pair optimized parameters
# NOTE: Run optimizer with new indicators to get updated values:
#   python run_scalping_optimizer.py --per-pair --trials 100 --days 180
pair_parameters:
  BTC/USD:
    take_profit_percent: 2.0
    stop_loss_percent: 1.0
    rsi_period: 8
    rsi_oversold: 20
    rsi_overbought: 60
    bb_period: 25
    bb_std_dev: 2.0
    vwap_threshold_percent: 0.3
    volume_spike_threshold: 1.5
    min_confirmations: 2
    stoch_k_period: 14
    stoch_oversold: 20
    stoch_overbought: 80
    atr_period: 14
    atr_stop_multiplier: 1.5
    atr_tp_multiplier: 2.0

  ETH/USD:
    take_profit_percent: 3.0
    stop_loss_percent: 1.0
    rsi_period: 13
    rsi_oversold: 40
    rsi_overbought: 75
    bb_period: 25
    bb_std_dev: 1.5
    vwap_threshold_percent: 0.2
    volume_spike_threshold: 2.25
    min_confirmations: 3
    stoch_k_period: 14
    stoch_oversold: 20
    stoch_overbought: 80
    atr_period: 14
    atr_stop_multiplier: 1.5
    atr_tp_multiplier: 2.0

  SOL/USD:
    take_profit_percent: 3.0
    stop_loss_percent: 1.0
    rsi_period: 6
    rsi_oversold: 40
    rsi_overbought: 60
    bb_period: 15
    bb_std_dev: 2.25
    vwap_threshold_percent: 0.1
    volume_spike_threshold: 1.25
    min_confirmations: 2
    stoch_k_period: 14
    stoch_oversold: 20
    stoch_overbought: 80
    atr_period: 14
    atr_stop_multiplier: 1.5
    atr_tp_multiplier: 2.0

  XRP/USD:
    take_profit_percent: 5.0
    stop_loss_percent: 2.0
    rsi_period: 5
    rsi_oversold: 30
    rsi_overbought: 65
    bb_period: 20
    bb_std_dev: 1.75
    vwap_threshold_percent: 0.3
    volume_spike_threshold: 2.25
    min_confirmations: 2
    stoch_k_period: 14
    stoch_oversold: 20
    stoch_overbought: 80
    atr_period: 14
    atr_stop_multiplier: 1.5
    atr_tp_multiplier: 2.0

  LINK/USD:
    take_profit_percent: 8.0
    stop_loss_percent: 1.0
    rsi_period: 12
    rsi_oversold: 35
    rsi_overbought: 60
    bb_period: 30
    bb_std_dev: 1.75
    vwap_threshold_percent: 0.9
    volume_spike_threshold: 1.0
    min_confirmations: 2
    stoch_k_period: 14
    stoch_oversold: 20
    stoch_overbought: 80
    atr_period: 14
    atr_stop_multiplier: 1.5
    atr_tp_multiplier: 2.0

  AVAX/USD:
    take_profit_percent: 5.5
    stop_loss_percent: 2.5
    rsi_period: 8
    rsi_oversold: 20
    rsi_overbought: 75
    bb_period: 30
    bb_std_dev: 1.5
    vwap_threshold_percent: 0.2
    volume_spike_threshold: 1.5
    min_confirmations: 2
    stoch_k_period: 14
    stoch_oversold: 20
    stoch_overbought: 80
    atr_period: 14
    atr_stop_multiplier: 1.5
    atr_tp_multiplier: 2.0

  DOGE/USD:
    take_profit_percent: 6.5
    stop_loss_percent: 1.5
    rsi_period: 5
    rsi_oversold: 25
    rsi_overbought: 65
    bb_period: 30
    bb_std_dev: 1.75
    vwap_threshold_percent: 0.9
    volume_spike_threshold: 2.25
    min_confirmations: 1
    stoch_k_period: 14
    stoch_oversold: 20
    stoch_overbought: 80
    atr_period: 14
    atr_stop_multiplier: 1.5
    atr_tp_multiplier: 2.0

  ADA/USD:
    take_profit_percent: 8.0
    stop_loss_percent: 1.5
    rsi_period: 6
    rsi_oversold: 30
    rsi_overbought: 65
    bb_period: 30
    bb_std_dev: 2.5
    vwap_threshold_percent: 0.5
    volume_spike_threshold: 2.5
    min_confirmations: 1
    stoch_k_period: 14
    stoch_oversold: 20
    stoch_overbought: 80
    atr_period: 14
    atr_stop_multiplier: 1.5
    atr_tp_multiplier: 2.0

  # New pairs — conservative defaults until optimizer tunes them
  DOT/USD:
    take_profit_percent: 4.0
    stop_loss_percent: 2.0
    rsi_period: 10
    rsi_oversold: 30
    rsi_overbought: 70
    bb_period: 20
    bb_std_dev: 2.0
    vwap_threshold_percent: 0.3
    volume_spike_threshold: 1.5
    min_confirmations: 2
    stoch_k_period: 14
    stoch_oversold: 20
    stoch_overbought: 80
    atr_period: 14
    atr_stop_multiplier: 1.5
    atr_tp_multiplier: 2.0

  MATIC/USD:
    take_profit_percent: 4.0
    stop_loss_percent: 2.0
    rsi_period: 10
    rsi_oversold: 30
    rsi_overbought: 70
    bb_period: 20
    bb_std_dev: 2.0
    vwap_threshold_percent: 0.3
    volume_spike_threshold: 1.5
    min_confirmations: 2
    stoch_k_period: 14
    stoch_oversold: 20
    stoch_overbought: 80
    atr_period: 14
    atr_stop_multiplier: 1.5
    atr_tp_multiplier: 2.0

  ATOM/USD:
    take_profit_percent: 4.0
    stop_loss_percent: 2.0
    rsi_period: 10
    rsi_oversold: 30
    rsi_overbought: 70
    bb_period: 20
    bb_std_dev: 2.0
    vwap_threshold_percent: 0.3
    volume_spike_threshold: 1.5
    min_confirmations: 2
    stoch_k_period: 14
    stoch_oversold: 20
    stoch_overbought: 80
    atr_period: 14
    atr_stop_multiplier: 1.5
    atr_tp_multiplier: 2.0

  NEAR/USD:
    take_profit_percent: 5.0
    stop_loss_percent: 2.5
    rsi_period: 10
    rsi_oversold: 25
    rsi_overbought: 75
    bb_period: 20
    bb_std_dev: 2.0
    vwap_threshold_percent: 0.3
    volume_spike_threshold: 1.5
    min_confirmations: 2
    stoch_k_period: 14
    stoch_oversold: 20
    stoch_overbought: 80
    atr_period: 14
    atr_stop_multiplier: 1.5
    atr_tp_multiplier: 2.0

# Adaptive pair management
adaptive:
  enabled: true
  min_win_rate: 0.35
  min_profit_factor: 0.85
  max_consecutive_losses: 3
  cooldown_hours: 2.0
  reenable_win_rate: 0.50

# Position sizing
position:
  initial_capital: 10000.0
  size_percent: 20.0
  confidence_scaling: true
  min_scale: 0.5
  max_scale: 1.5

# Fees
fees:
  maker_percent: 0.16
  taker_percent: 0.26

# Order execution
execution:
  use_maker_orders: true
  maker_price_offset: 0.0
  order_timeout_seconds: 60

# Circuit breaker
circuit_breaker:
  global_max_drawdown_pct: 5.0
  cooldown_hours: 4
  pair_max_drawdown_pct: 2.0
  pair_cooldown_hours: 2.0
  consecutive_loss_limit: 4

# Regime detector
regime_detector:
  fast_sma_period: 50
  slow_sma_period: 200
  bull_slope_threshold: 0.05
  bear_slope_threshold: -0.05

# EMA trend filter
ema_filter:
  enabled: true
  bearish_threshold: -0.5

# Trading loop
trading:
  check_interval_seconds: 120
