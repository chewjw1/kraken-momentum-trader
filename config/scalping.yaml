# Scalping Strategy Configuration (v3 — Regime-Aware Optimized)
# Enhanced with: Stochastic, MACD, OBV, ATR dynamic stops, short selling
# Optimized using 365 days of data with regime-aware Bayesian optimization
#
# Regime-aware config: config/scalping.optimized.regime.yaml
# (used by live trader for bull/bear/sideways-specific parameters)
#
# Optimization results (2025-03-01 to 2026-03-01, per-pair per-regime):
#   ATOM/USD:  bull +4.25% (100% WR, 11 trades), bear +3.39% (100% WR, 4 trades)
#   NEAR/USD:  bull +2.74% (70% WR, 10 trades), bear +2.95% (89% WR, 9 trades)
#   DOT/USD:   bull +3.48% (75% WR, 8 trades), bear +3.53% (75% WR, 8 trades)
#   XRP/USD:   bear +3.68% (100% WR, 5 trades)
#   ETH/USD:   bear +3.21% (100% WR, 8 trades)
#   LINK/USD:  bull +2.17%, bear +2.53% (100% WR)
#   AVAX/USD:  bull +2.84%, bear +1.34% (60% WR, 10 trades)
#   BTC/USD:   bear +1.34% (62.5% WR, 8 trades)
#   SOL/USD:   bear +1.70% (100% WR, 2 trades)
#   POL/USD:   bull +1.25%, bear +0.22% (57% WR, 7 trades)
#
# Strategy: 8-indicator confirmation with long+short support
# Entry: Buy when 2+ signals confirm oversold, Short when 3+ confirm overbought
# Exit: ATR-based dynamic TP/SL, or indicator reversal

strategy:
  name: "scalping"

  # Default parameters (fallback when per-pair not specified)
  take_profit_percent: 3.0    # Static fallback — ATR dynamic TP preferred
  stop_loss_percent: 2.0      # Static fallback — ATR dynamic SL preferred
  candle_interval: 240        # 4-hour candles
  min_confirmations: 2        # Minimum confirmations for long entry

# Core oscillators
indicators:
  rsi:
    period: 8
    oversold: 25.0
    overbought: 70.0

  stochastic:
    k_period: 11
    d_period: 3
    oversold: 20.0
    overbought: 80.0

  macd:
    fast_period: 12
    slow_period: 26
    signal_period: 9

  bollinger:
    period: 20
    std_dev: 2.0
    squeeze_threshold: 3.0

  vwap:
    threshold_percent: 0.5

  volume:
    spike_threshold: 2.0

  obv:
    sma_period: 20

  atr:
    period: 16
    stop_multiplier: 1.75     # Dynamic SL = 1.75 x ATR
    tp_multiplier: 2.5        # Dynamic TP = 2.5 x ATR
    use_dynamic_stops: true   # Use ATR-based stops instead of static %

# Short selling configuration
shorting:
  enabled: true
  min_confirmations: 3        # Shorts need more confirmation than longs

# Trading pairs — expanded with new additions
pairs:
  - ATOM/USD   # TOP — bull +4.25%, bear +3.39%
  - NEAR/USD   # STRONG — bull +2.74%, bear +2.95%
  - DOT/USD    # STRONG — bull +3.48%, bear +3.53%
  - XRP/USD    # VIABLE — bear +3.68%
  - ETH/USD    # VIABLE — bear +3.21%
  - LINK/USD   # VIABLE — bull +2.17%, bear +2.53%
  - AVAX/USD   # VIABLE — bull +2.84%, bear +1.34%
  - BTC/USD    # MARGINAL — bear +1.34%
  - SOL/USD    # LOW DATA — bear +1.70% (2 trades)
  - POL/USD    # WEAK — bull +1.25%, bear +0.22%

# Per-pair optimized parameters (bear regime defaults — most common regime)
# Live trader uses regime-specific config from scalping.optimized.regime.yaml
pair_parameters:
  BTC/USD:
    take_profit_percent: 8.0
    stop_loss_percent: 4.0
    rsi_period: 5
    rsi_oversold: 25
    rsi_overbought: 80
    bb_period: 30
    bb_std_dev: 1.5
    vwap_threshold_percent: 0.9
    volume_spike_threshold: 1.75
    min_confirmations: 2
    stoch_k_period: 7
    stoch_oversold: 20
    stoch_overbought: 70
    atr_period: 16
    atr_stop_multiplier: 1.0
    atr_tp_multiplier: 1.5
    short_min_confirmations: 2

  ETH/USD:
    take_profit_percent: 5.5
    stop_loss_percent: 3.5
    rsi_period: 5
    rsi_oversold: 20
    rsi_overbought: 75
    bb_period: 30
    bb_std_dev: 1.75
    vwap_threshold_percent: 0.1
    volume_spike_threshold: 2.5
    min_confirmations: 2
    stoch_k_period: 13
    stoch_oversold: 30
    stoch_overbought: 80
    atr_period: 20
    atr_stop_multiplier: 2.25
    atr_tp_multiplier: 1.5
    short_min_confirmations: 3

  SOL/USD:
    take_profit_percent: 3.0
    stop_loss_percent: 3.5
    rsi_period: 14
    rsi_oversold: 25
    rsi_overbought: 70
    bb_period: 20
    bb_std_dev: 2.25
    vwap_threshold_percent: 0.3
    volume_spike_threshold: 1.25
    min_confirmations: 4
    stoch_k_period: 5
    stoch_oversold: 15
    stoch_overbought: 85
    atr_period: 10
    atr_stop_multiplier: 1.25
    atr_tp_multiplier: 3.5
    short_min_confirmations: 3

  XRP/USD:
    take_profit_percent: 3.0
    stop_loss_percent: 1.5
    rsi_period: 7
    rsi_oversold: 35
    rsi_overbought: 65
    bb_period: 25
    bb_std_dev: 1.75
    vwap_threshold_percent: 0.6
    volume_spike_threshold: 1.75
    min_confirmations: 1
    stoch_k_period: 11
    stoch_oversold: 15
    stoch_overbought: 85
    atr_period: 18
    atr_stop_multiplier: 2.5
    atr_tp_multiplier: 4.0
    short_min_confirmations: 2

  LINK/USD:
    take_profit_percent: 7.0
    stop_loss_percent: 3.0
    rsi_period: 8
    rsi_oversold: 35
    rsi_overbought: 65
    bb_period: 10
    bb_std_dev: 1.5
    vwap_threshold_percent: 0.7
    volume_spike_threshold: 1.25
    min_confirmations: 2
    stoch_k_period: 21
    stoch_oversold: 20
    stoch_overbought: 75
    atr_period: 16
    atr_stop_multiplier: 2.25
    atr_tp_multiplier: 3.5
    short_min_confirmations: 3

  AVAX/USD:
    take_profit_percent: 7.0
    stop_loss_percent: 3.0
    rsi_period: 6
    rsi_oversold: 20
    rsi_overbought: 65
    bb_period: 10
    bb_std_dev: 2.0
    vwap_threshold_percent: 1.0
    volume_spike_threshold: 2.25
    min_confirmations: 2
    stoch_k_period: 9
    stoch_oversold: 30
    stoch_overbought: 75
    atr_period: 16
    atr_stop_multiplier: 1.0
    atr_tp_multiplier: 1.75
    short_min_confirmations: 3

  DOT/USD:
    take_profit_percent: 8.0
    stop_loss_percent: 3.5
    rsi_period: 13
    rsi_oversold: 25
    rsi_overbought: 60
    bb_period: 10
    bb_std_dev: 1.5
    vwap_threshold_percent: 0.4
    volume_spike_threshold: 2.25
    min_confirmations: 3
    stoch_k_period: 9
    stoch_oversold: 15
    stoch_overbought: 85
    atr_period: 10
    atr_stop_multiplier: 1.25
    atr_tp_multiplier: 4.0
    short_min_confirmations: 3

  POL/USD:
    take_profit_percent: 1.5
    stop_loss_percent: 3.5
    rsi_period: 6
    rsi_oversold: 20
    rsi_overbought: 80
    bb_period: 15
    bb_std_dev: 1.75
    vwap_threshold_percent: 1.0
    volume_spike_threshold: 1.75
    min_confirmations: 1
    stoch_k_period: 11
    stoch_oversold: 20
    stoch_overbought: 85
    atr_period: 10
    atr_stop_multiplier: 1.25
    atr_tp_multiplier: 1.5
    short_min_confirmations: 2

  ATOM/USD:
    take_profit_percent: 3.5
    stop_loss_percent: 2.0
    rsi_period: 8
    rsi_oversold: 20
    rsi_overbought: 80
    bb_period: 20
    bb_std_dev: 2.25
    vwap_threshold_percent: 0.4
    volume_spike_threshold: 2.25
    min_confirmations: 3
    stoch_k_period: 7
    stoch_oversold: 30
    stoch_overbought: 80
    atr_period: 20
    atr_stop_multiplier: 1.5
    atr_tp_multiplier: 2.75
    short_min_confirmations: 2

  NEAR/USD:
    take_profit_percent: 2.5
    stop_loss_percent: 1.0
    rsi_period: 5
    rsi_oversold: 20
    rsi_overbought: 60
    bb_period: 30
    bb_std_dev: 2.25
    vwap_threshold_percent: 0.1
    volume_spike_threshold: 2.5
    min_confirmations: 1
    stoch_k_period: 21
    stoch_oversold: 20
    stoch_overbought: 80
    atr_period: 20
    atr_stop_multiplier: 2.5
    atr_tp_multiplier: 1.75
    short_min_confirmations: 4

# Adaptive pair management
adaptive:
  enabled: true
  min_win_rate: 0.35
  min_profit_factor: 0.85
  max_consecutive_losses: 3
  cooldown_hours: 2.0
  reenable_win_rate: 0.50

# Position sizing
position:
  initial_capital: 10000.0
  size_percent: 20.0
  confidence_scaling: true
  min_scale: 0.5
  max_scale: 1.5

# Fees
fees:
  maker_percent: 0.16
  taker_percent: 0.26

# Order execution
execution:
  use_maker_orders: true
  maker_price_offset: 0.0
  order_timeout_seconds: 60

# Circuit breaker
circuit_breaker:
  global_max_drawdown_pct: 5.0
  cooldown_hours: 4
  pair_max_drawdown_pct: 2.0
  pair_cooldown_hours: 2.0
  consecutive_loss_limit: 4

# Regime detector
regime_detector:
  fast_sma_period: 50
  slow_sma_period: 200
  bull_slope_threshold: 0.05
  bear_slope_threshold: -0.05

# EMA trend filter
ema_filter:
  enabled: true
  bearish_threshold: -0.5

# Trading loop
trading:
  check_interval_seconds: 120
